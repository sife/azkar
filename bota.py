import asyncio
import logging
import datetime
import random
import pytz
from telegram import Bot, constants

# ุฅุนุฏุงุฏ ุงูุชููู ูุงููุนุฑู
TOKEN = "7876105293:AAG6wsc8X7ifkNaPyrdCFNH5tW8Kln1fHyU"
CHANNEL_ID = "@jordangold"
RAMADAN_START = datetime.date(2025, 3, 1)
RAMADAN_DAYS = 30

# ุชุนููู ุงูุชูููุช ุงููุญูู ููุฑูุงุถ
RIYADH_TZ = pytz.timezone("Asia/Riyadh")

# ูุงุฆูุฉ ุงูุฃุฐูุงุฑ ูุงูุฃุฏุนูุฉ
AZKAR_LIST = [
    "โจ ๐ ุณุจุญุงู ุงููู ูุจุญูุฏูุ ุณุจุญุงู ุงููู ุงูุนุธูู ๐ โจ",
    "๐ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ ๐",
    "๐ ุฃุณุชุบูุฑ ุงููู ุงูุนุธูู ูุฃุชูุจ ุฅููู ๐",
    "๐ ุงูููู ุตู ูุณูู ุนูู ูุจููุง ูุญูุฏ ๐",
    "๐ ูุง ุญูู ููุง ููุฉ ุฅูุง ุจุงููู ุงูุนูู ุงูุนุธูู ๐",
    "๐ ุงูููู ุฅูู ุนูู ุชุญุจ ุงูุนูู ูุงุนู ุนูุง ๐",
    "๐ ุฑูุจููููุง ุขุชูููุง ููู ุงูุฏููููููุง ุญูุณูููุฉู ููููู ุงูุขุฎูุฑูุฉู ุญูุณูููุฉู ููููููุง ุนูุฐูุงุจู ุงููููุงุฑู ๐",
    "๐ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ูู ุ ูู ุงูููู ุ ููู ุงูุญูุฏ ุ ููู ุนูู ูู ุดูุก ูุฏูุฑ ๐",
    "๐ ูุง ุฅูู ุฅูุง ุงููู ุงูุนุธูู ุงูุญููู ุ ูุง ุฅูู ุฅูุง ุงููู ุฑุจู ุงูุนุฑุด ุงูุนุธูู ุ ูุง ุฅูู ุฅูุง ุงููู ุฑุจู ุงูุณูููุงูุงุช ุ ูุฑุจู ุงูุฃุฑุถ ุ ูุฑุจู ุงูุนุฑุด ุงููุฑูู .. ๐",
    "โจ ุณูุจูุญูุงู ุงููู ุนุฏุฏ ูุงูู ุงูุณูุงูุงุช ูุงูุฃุฑุถ. โจ",
    "๐ ูุงุญู ูุงูููู ุจุฑุญูุชู ูฒุณุชุบูุซ ูฒุตูุญ ูู ุดุฃูู ููู ููุง ุชูููู ูณูู ููุณู ุทุฑูุฉ ุนูู ๐",
    "๐ ุญุณุจู ุงููู ูุง ุฅูู ุฅูุง ูู ุนููู ุชูููุช ููู ุฑุจ ุงูุนุฑุด ุงูุนุธูู ๐",
    "๐ ุงูููู ุงุบูุฑ ูู ุฎุทูุฆุชู ูุฌููู ูุฅุณุฑุงูู ูู ุฃูุฑู ููุง ุฃูุช ุฃุนูู ุจู ูููุ ุงูููู ุงุบูุฑ ูู ูุฒูู ูุฌุฏู ูุฎุทุฆู ูุนูุฏู ููู ุฐูู ุนูุฏู ๐",
    "โจ ุงูููู ุงุฌุนู ุตูุงูู ููู ุตูุงู ุงูุตุงุฆูููุ ูููุงูู ููู ููุงู ุงููุงุฆูููุ ููุจูููู ููู ุนู ูููุฉ ุงูุบุงููููุ ููุจ ูู ุฌุฑูู ููู ูุง ุฅูู ุงูุนุงููููุ ูุงุนูู ุนูู ูุง ุนุงููุงู ุนู ุงููุฌุฑููู. โจ",
    "๐ ุงูููู ุงุฌุนููู ูู ูุฐุง ุงูุดูุฑ ูู ุงูููุจููููุ ููุง ุชุฌุนููู ููู ูู ุงููุญุฑููููุ ูุงุบูุฑ ูู ุฐููุจู ูุง ุฃูุฑู ุงูุฃูุฑููู. ๐",
    "๐ ุงูููู ุงุฌุนู ููุง ูู ูุฐุง ุงูุดูุฑ ุงููุฑูู ูุตูุจูุง ูู ุงูุฑุญูุฉ ูุงููุบูุฑุฉ ูุงูุนุชู ูู ุงููุงุฑ ๐"
]


# ---------------------- ุฏุงูุฉ ุญุณุงุจ ุงูุฃูุงู ----------------------
def get_ramadan_message():
    today = datetime.datetime.now(RIYADH_TZ).date()
    if today < RAMADAN_START:
        days_left = (RAMADAN_START - today).days
        return f"โจ๐ ุชุจูู {days_left} ููููุง ุนูู ุฏุฎูู ุดูุฑ ุฑูุถุงู ุงููุจุงุฑู ๐โจ"
    elif RAMADAN_START <= today < RAMADAN_START + datetime.timedelta(days=RAMADAN_DAYS):
        days_left = RAMADAN_DAYS - (today - RAMADAN_START).days - 1  # โ ุฎุตู ููู ุฅุถุงูู ูุญุณุงุจ ุตุญูุญ
        if days_left < 0:  # ุฅุฐุง ุงูููู ุงูุฃุฎูุฑ
            days_left = 0
        return f"๐โจ ุชุจูู {days_left} ููููุง ุนูู ููุงูุฉ ุดูุฑ ุฑูุถุงู ุงููุจุงุฑู โจ๐"
    else:
        return "โจ๐ ูุณุฃู ุงููู ุฃู ูุชูุจู ููุง ููููู ุตุงูุญ ุงูุฃุนูุงู ๐โจ"


# ---------------------- ุฏุงูุฉ ุฅุฑุณุงู ุงูุฃุฐูุงุฑ ----------------------
async def send_azkar():
    bot = Bot(token=TOKEN)
    
    while True:  # ุญููุฉ ูุณุชูุฑุฉ ูุถูุงู ุงุณุชูุฑุงุฑ ุชุดุบูู ุงูุจูุช
        try:
            azkar = random.choice(AZKAR_LIST)
            ramadan_msg = get_ramadan_message()
            message = f"{azkar}\n\n{ramadan_msg}\n\n๐ ุจูุช SA Forex ุฃุฐูุงุฑ ุฑูุถุงู ๐"
            
            await bot.send_message(chat_id=CHANNEL_ID, text=message, parse_mode=constants.ParseMode.HTML)
            logging.info(f"ุชู ุฅุฑุณุงู ุงูุฐูุฑ: {message}")

        except Exception as e:
            logging.error(f"โ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูุฑุณุงูุฉ: {e}")

        await asyncio.sleep(14200)  # ุงูุงูุชุธุงุฑ (ุญูุงูู 4 ุณุงุนุงุช) ุจูู ูู ุฅุฑุณุงู


# ---------------------- ุชุดุบูู ุงูููุฏ ----------------------
if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO, format="%(asctime)s - %(levelname)s - %(message)s")

    loop = asyncio.get_event_loop()
    loop.create_task(send_azkar())  # ุชุดุบูู ุงููููุฉ ูู ุงูุฎูููุฉ
    loop.run_forever()  # ุชุดุบูู ูุณุชูุฑ ููุณูุฑูุจุช
